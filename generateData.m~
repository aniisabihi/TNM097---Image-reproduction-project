function [data, average] = generateData(tileData, tileAve, dataSize)
    
    [subImg, numTiles, colorChannels] = size(tileAve); 
    % Get dimensions of the tiles-set
    [height, width, ~, numTiles] = size(ImData);
    data = zeros(size(tileData,1));
    average = zeros(subImg, dataSize, colorChannels);
    
    for y = 1:dataSize
       
        dist = zeros(1,numTiles);	% Initialize distance vector
        
        for k = 1:numTiles
            % Compute the euclidean distance
            dist = dist + sqrt(  (tileAve(:, y, 1) - tileAve(:, k, 1)).^2 + ...
                                 (tileAve(:, y, 2) - tileAve(:, k, 2)).^2 + ...
                                 (tileAve(:, y, 3) - tileAve(:, k, 3)).^2  );
        end           
       
        % Remove the first value 
        dist(1) = [];  
        
        % Find the minium distance, minDist = value, match = index of that value
		[~, match] = min(dist);  

        % Put the tile from the tile-set into our result image
		data(:,:,:,y) = tileData(:,:,:,match);
        average(:,y,:) = tileAve(:,match,:);
    end
end

